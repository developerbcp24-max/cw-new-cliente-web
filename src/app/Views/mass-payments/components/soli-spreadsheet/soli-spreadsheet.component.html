<fieldset [disabled]="disabled"><legend></legend><br>
    <app-amount-account-verificated [amount]="batchInformation.amount" [totalErrors]="totalErrors"
        [totalCorrects]="totalCorrects" [haveErrors]="haveErrors" [errorsDetail]="errorsDetail"
        [currency]="batchInformation.currency" (onAddRow)="handleShowAdditionForm()">
    </app-amount-account-verificated>
    <div *ngIf="visible">
        <div class="row">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-12  col-sm-12">
                        <table class="cw-table table-striped"><caption></caption>
                            <thead>
                                <tr>
                                    <th *ngIf="headers.line">Linea</th>
                                    <th *ngIf="headers.account">Número destino</th>
                                    <th *ngIf="headers.amount">Monto</th>
                                    <th *ngIf="headers.titular">Razon Beneficiario</th>
                                    <th *ngIf="headers.gloss">Glosa</th>
                                    <th *ngIf="headers.mail">Email Proveedor</th>
                                    <th>Acciones</th>
                                    <th>
                                        <button (click)="showFilter=!showFilter" class="table-filter" #insideButton><em
                                                class="fas fa-plus"></em></button>
                                        <div class="historical__box table-filter--hidden"
                                            [ngClass]="{'show-filter':showFilter}" #insideElement>
                                            <ul>
                                                <li>
                                                    <label class="checkbox">
                                                        <input type="checkbox" [(ngModel)]="headers.line">
                                                        <span class="check"></span>
                                                    </label>
                                                    <p>Linea</p>
                                                </li>
                                                <li>
                                                    <label class="checkbox">
                                                        <input type="checkbox" [(ngModel)]="headers.account">
                                                        <span class="check"></span>
                                                    </label>
                                                    <p>Número Destino</p>
                                                </li>
                                                <li>
                                                    <label class="checkbox">
                                                        <input type="checkbox" [(ngModel)]="headers.amount">
                                                        <span class="check"></span>
                                                    </label>
                                                    <p>Monto</p>
                                                </li>
                                                <li>
                                                    <label class="checkbox">
                                                        <input type="checkbox" [(ngModel)]="headers.titular">
                                                        <span class="check"></span>
                                                    </label>
                                                    <p>Razon Beneficiario</p>
                                                </li>
                                                <li>
                                                    <label class="checkbox">
                                                        <input type="checkbox" [(ngModel)]="headers.gloss">
                                                        <span class="check"></span>
                                                    </label>
                                                    <p>Glosa</p>
                                                </li>
                                                <li>
                                                    <label class="checkbox">
                                                        <input type="checkbox" [(ngModel)]="headers.mail">
                                                        <span class="check"></span>
                                                    </label>
                                                    <p>Email Proveedor</p>
                                                </li>
                                            </ul>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr [ngClass]="{'error':row.isError}" *ngFor="let row of spreadsheetPerPage"
                                    data-toggle="tooltip" data-placement="top" data-html="true"
                                    title="{{row.errorMessages}}">
                                    <td *ngIf="headers.line" title="Linea">{{row.line}}</td>
                                    <td *ngIf="headers.account" title="Cuenta destino">{{row.accountNumber}}</td>
                                    <td *ngIf="headers.amount" title="Monto">{{row.amount | number: '1.2-2'}}</td>
                                    <td *ngIf="headers.titular" title="Razon Beneficiario">{{row.titular}}</td>
                                    <td *ngIf="headers.gloss" title="Glosa">{{row.gloss}}</td>
                                    <td *ngIf="headers.detail" title="Detalles">{{row.detail}}</td>
                                    <td *ngIf="headers.mail" title="Email Proveedor">{{row.mail}}</td>
                                    <td title="Acciones" class="actions" colspan="2">
                                        <a (click)="handleShowEditForm(row)"><em class="fas fa-edit"></em></a>
                                        <a (click)="handleTryToRemoveRow(row.line)"><em class="fas fa-trash"></em></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <app-modal [visible]="showDetailForm" (onClose)="showDetailForm=false" [size]="'lg'" [manualCloseModal]="true">
        <div class="app-modal-header col-md-12 col-sm-12">{{operation === 1 ? 'Modificar fila' : 'Agregar fila'}}</div>
        <div class="app-modal-body col-md-12 col-sm-12">
            <form name="detailForm" #detailForm="ngForm" novalidate autocomplete="off">
                <div class="row haberes__modal__inputs">
                    <div class="col-md-6 inputs ">
                        <div class="input-numero">
                            <label>Número Destino</label>
                            <input class="input_modal_1" type="text" name="account" [(ngModel)]="detail.accountNumber" #account="ngModel"
                                required appOnlyType="integer" appValidate="integer" minlength="5" [appMaxLength]="8">
                            <app-show-errors [control]="account"> </app-show-errors>
                        </div>
                    </div>
                    <div class="col-md-6 inputs ">
                        <div class="input-numero">
                            <label>Monto</label>
                            <input class="input_modal_1" type="text" name="amount" [(ngModel)]="detail.amount" #amount="ngModel" required
                                mask-money [appMaxLength]=16 appValidate="majorZero">
                            <app-show-errors [control]="amount"></app-show-errors>
                        </div>
                    </div>
                    <div class="col-md-6 inputs ">
                        <div class="input-numero">
                            <label>Razon Beneficiario</label>
                            <input class="input_modal_1" type="text" name="titular" [(ngModel)]="detail.titular" #titular="ngModel"
                                appValidate="alphanumericBasicSymbols" appOnlyType="alphanumericBasicSymbols" required
                                maxlength="40">
                            <app-show-errors [control]="titular"></app-show-errors>
                        </div>
                    </div>
                    <div class="col-md-6 inputs ">
                        <div class="input-numero">
                            <label>Glosa</label>
                            <input class="input_modal_1" type="text" name="gloss" [(ngModel)]="detail.gloss" #gloss="ngModel" required
                                appOnlyType="alphanumericBasicSymbols" appValidate="alphanumericBasicSymbols"
                                maxlength="30">
                            <app-show-errors [control]="gloss"></app-show-errors>
                        </div>
                    </div>
                </div>
                <div class="row haberes__modal__inputs">
                </div>
            </form>

            <div class="row haberes__modal__inputs">
                <div class="col-md-6 inputs ">
                    <div class="input-numero">
                        <label>Correo electrónico proveedor</label><br>Separar los correos con una (;) y sin espacios.
                        <input class="input_modal_1" type="mail" name="mail" [(ngModel)]="detail.mail" #mail="ngModel"
                            appValidate="manyEmails" [appMaxLength]="500">
                        <app-show-errors [control]="mail"></app-show-errors>
                    </div>
                </div>
            </div>
        </div>
        <div class="app-modal-footer col-md-12 col-sm-12">
            <div class="row modal__container-button justify-content-center">
              <div class="col-md-4 col-xs-12 d-flex justify-content-center">
                <button class="button__principal modal__button"
                  (click)="handleValidate()">{{operation===1?'ACEPTAR':'GUARDAR'}}</button>
              </div>
            </div>
            <div class="row modal__cancelar justify-content-center">
              <div class="col-md-12 col-xs-12 d-flex justify-content-center">
                <a (click)="handleCancel()" class="link-cancel-modal">CANCELAR</a>
              </div>
            </div>
        </div>
    </app-modal>
    <app-modal [visible]="showRemoveRowForm" (onClose)="showRemoveRowForm=false" [size]="'sm'">
        <div class="app-modal-header col-md-12 col-sm-12">Eliminación de información</div>
        <div class="app-modal-body col-md-12 col-sm-12">¿Está seguro de eliminar esta línea de la planilla?</div>
        <div class="app-modal-footer col-md-12 col-sm-12">
            <div class="row modal__container-button justify-content-center">
              <div class="col-md-4 col-xs-12 d-flex justify-content-center">
                <button class="button__principal modal__button" (click)="handleRemove()">ELIMINAR</button>
              </div>
            </div>
            <div class="row modal__cancelar justify-content-center">
              <div class="col-md-12 col-xs-12 d-flex justify-content-center">
                <a (click)="showRemoveRowForm=false" class="link-cancel-modal">CANCELAR</a>
              </div>
            </div>
        </div>
    </app-modal>
</fieldset>
