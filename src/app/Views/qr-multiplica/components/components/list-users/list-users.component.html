<div class="w-full">
  <fieldset [disabled]="disabled">
    <legend></legend>
    <div class="w-full">
      <h3 class="text-xl font-semibold mb-4">Lista de Usuarios</h3>
      <div *ngIf="visible">
        <div class="w-full mt-12">
          <div class="w-full overflow-x-auto">
            <table class="w-full table-auto border-collapse">
              <thead class="bg-blue-900 text-white">
                <tr>
                  <th *ngIf="headers.line" class="px-6 py-3 text-left w-16"></th>
                  <th *ngIf="headers.Nombre" class="px-6 py-3 text-left">Nombre</th>
                  <th *ngIf="headers.userType" class="px-6 py-3 text-left">Rol Usuario</th>
                  <th *ngIf="headers.estadoUser" class="px-6 py-3 text-left">Estado</th>
                  <th *ngIf="headers.celular" class="px-6 py-3 text-left">NÂ° Celular</th>
                  <th *ngIf="headers.email" class="px-6 py-3 text-left">Email</th>
                  <th *ngIf="headers.Accion" class="px-6 py-3 text-left w-40">Acciones</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let row of listUserCli"
                    class="hover:bg-gray-50 transition-colors"
                    [title]="row">
                  <td *ngIf="headers.line" class="px-6 py-3">
                    <i class="fa fa-user" aria-hidden="true"></i>
                  </td>
                  <td *ngIf="headers.Nombre" class="px-6 py-3" title="Nombre">
                    {{row.name}}
                  </td>
                  <td *ngIf="headers.userType" class="px-6 py-3" title="Rol">
                    {{row.userType}}
                  </td>
                  <td *ngIf="headers.estadoUser" class="px-6 py-3" title="Estado">
                    {{row.bachAtmId == 0 ? 'Libre': 'Asignado'}}
                  </td>
                  <td *ngIf="headers.celular" class="px-6 py-3" title="Numero Celular">
                    {{row.cellphone}}
                  </td>
                  <td *ngIf="headers.email" class="px-6 py-3" title="Email">
                    {{row.email}}
                  </td>
                  <td class="px-6 py-3" title="Accion">
                    <div class="flex items-center gap-2">
                      <input
                        class="w-10 h-5 appearance-none bg-gray-300 rounded-full relative cursor-pointer transition-colors checked:bg-green-500 before:content-[''] before:absolute before:w-4 before:h-4 before:rounded-full before:bg-white before:top-0.5 before:left-0.5 before:transition-transform checked:before:translate-x-5"
                        type="checkbox"
                        [id]="'estado-' + row.status"
                        [(ngModel)]="row.status"
                        (change)="toggleUserState(row)">
                      <label
                        class="cursor-pointer text-sm font-medium whitespace-nowrap"
                        [class.text-green-600]="row.status"
                        [class.text-gray-600]="!row.status"
                        [for]="'estado-' + row.status">
                        {{ row.status ? 'Activo' : 'Inactivo' }}
                      </label>
                    </div>
                  </td>
                </tr>
                <tr *ngFor="let row of userNewList"
                    class="hover:bg-gray-50 transition-colors"
                    [title]="row.name">
                  <td *ngIf="headers.line" class="px-6 py-3"></td>
                  <td *ngIf="headers.Nombre" class="px-6 py-3" title="Nombre">
                    {{row.name}}
                  </td>
                  <td *ngIf="headers.userType" class="px-6 py-3" title="Rol">
                    {{row.userType}}
                  </td>
                  <td *ngIf="headers.estadoUser" class="px-6 py-3" title="Estado">
                    {{row.bachAtmId == 0 ? 'Libre': 'Asignado'}}
                  </td>
                  <td *ngIf="headers.celular" class="px-6 py-3" title="Numero Celular">
                    {{row.cellphone}}
                  </td>
                  <td *ngIf="headers.email" class="px-6 py-3" title="Email">
                    {{row.email}}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <app-pagination
          [totalItems]="listUserQr.length"
          [maxSize]="pageSize"
          [isCenter]="true"
          (onChange)="handlePageChanged($event)"
          [rowsPerPage]="rowsPerPage"
          (onChangeRowsPerPage)="handleViewRows($event)">
        </app-pagination>
      </div>
    </div>
  </fieldset>
</div>
