<div class="w-full">
  <fieldset [disabled]="disabled">
    <legend></legend>
    <div class="w-full">
      <h3 class="text-xl font-semibold mb-4">Lista de Cajas</h3>
      <div *ngIf="visible">
        <div class="w-full mt-12">
          <div class="w-full overflow-x-auto">
            <table class="w-full table-auto border-collapse">
              <thead class="bg-blue-900 text-white">
                <tr>
                  <th *ngIf="headers.line" class="px-6 py-3 text-left w-16"></th>
                  <th *ngIf="headers.atmName" class="px-6 py-3 text-left">Caja</th>
                  <th *ngIf="headers.name" class="px-6 py-3 text-left">Usuario</th>
                  <th *ngIf="headers.branchCode" class="px-6 py-3 text-left">Sucursal</th>
                  <th *ngIf="headers.city" class="px-6 py-3 text-left">Ciudad</th>
                  <th *ngIf="headers.status" class="px-6 py-3 text-left w-40">Acciones</th>
                </tr>
              </thead>

              <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let row of listAtmQRs"
                    class="hover:bg-gray-50 transition-colors"
                    [title]="row.atmName">
                  <td *ngIf="headers.line" class="px-6 py-3" title="Icono">
                    <i class="fa fa-users" aria-hidden="true"></i>
                  </td>
                  <td *ngIf="headers.atmName" class="px-6 py-3" title="Name">
                    {{row.atmName}}
                  </td>
                  <td *ngIf="headers.name" class="px-6 py-3" title="Usuario">
                    {{row.name}}
                  </td>
                  <td *ngIf="headers.branchCode" class="px-6 py-3" title="Sucursal">
                    {{row.branchName}}
                  </td>
                  <td *ngIf="headers.city" class="px-6 py-3" title="Ciudad">
                    {{row.city}}
                  </td>
                  <td class="px-6 py-3" title="Accion">
                    <div class="flex items-center gap-2">
                      <input
                        class="w-10 h-5 appearance-none bg-gray-300 rounded-full relative cursor-pointer transition-colors checked:bg-green-500 before:content-[''] before:absolute before:w-4 before:h-4 before:rounded-full before:bg-white before:top-0.5 before:left-0.5 before:transition-transform checked:before:translate-x-5"
                        type="checkbox"
                        [id]="'estado-' + row.isDeleted"
                        [(ngModel)]="row.isDeleted"
                        (change)="toggleUserState(row)">
                      <label
                        class="cursor-pointer text-sm font-medium whitespace-nowrap"
                        [class.text-green-600]="row.isDeleted"
                        [class.text-gray-600]="!row.isDeleted"
                        [for]="'estado-' + row.isDeleted">
                        {{ row.isDeleted ? 'Activo' : 'Inactivo' }}
                      </label>
                    </div>
                  </td>
                </tr>
              </tbody>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let row of cajaNewList"
                    class="hover:bg-gray-50 transition-colors"
                    [title]="row.atmName">
                  <td *ngIf="headers.line" class="px-6 py-3"></td>
                  <td *ngIf="headers.atmName" class="px-6 py-3" title="Linea">
                    {{row.atmName}}
                  </td>
                  <td *ngIf="headers.name" class="px-6 py-3" title="Usuario">
                    {{row.userClieName}}
                  </td>
                  <td *ngIf="headers.branchCode" class="px-6 py-3" title="Sucursal">
                    {{row.branchName}}
                  </td>
                  <td *ngIf="headers.userId" class="px-6 py-3" title="Ciudad">
                    {{row.atmCity}}
                  </td>
                  <td class="px-6 py-3" title="Acciones" colspan="2">
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <app-pagination
          [totalItems]="listAtmQR.length"
          [maxSize]="itemsPerPage"
          [isCenter]="true"
          (onChange)="handlePageChanged($event)"
          [rowsPerPage]="rowsPerPage"
          (onChangeRowsPerPage)="handleViewRows($event)">
        </app-pagination>
      </div>
    </div>
  </fieldset>
</div>
